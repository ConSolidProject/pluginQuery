(self.webpackChunkprojectquery=self.webpackChunkprojectquery||[]).push([[178],{79178:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(38922),t),i(a(32525),t)},38922:function(e,t,a){"use strict";var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function s(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;const i=a(16980),n=a(11288),o=a(86610);t.Client=class{constructor(e){this.context=(e.contextParser||new n.ContextParser).parse(e.context,{baseIRI:e.baseIRI}),this.queryEngine=e.queryEngine,this.graphqlToSparqlConverter=e.graphqlToSparqlConverter||new i.Converter({dataFactory:e.dataFactory,requireContext:!0}),this.sparqlJsonToTreeConverter=e.sparqlJsonToTreeConverter||new o.Converter({dataFactory:e.dataFactory,materializeRdfJsTerms:!0})}query(e){return r(this,void 0,void 0,(function*(){const{sparqlAlgebra:t,singularizeVariables:a}="query"in e?yield this.graphQlToSparql({query:e.query,variables:e.variables}):e,r=yield this.queryEngine.query(t,e.queryEngineOptions);return{data:this.sparqlJsonToTreeConverter.sparqlJsonResultsToTree(r,{singularizeVariables:a})}}))}graphQlToSparql({query:e,variables:t}){return r(this,void 0,void 0,(function*(){const t={},a={singularizeVariables:t,variablesDict:{}};return{sparqlAlgebra:yield this.graphqlToSparqlConverter.graphqlToSparqlAlgebra(e,(yield this.context).getContextRaw(),a),singularizeVariables:t}}))}}},32525:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},16980:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(10471),t),i(a(87770),t),i(a(99093),t),i(a(8012),t),i(a(25360),t)},87770:function(e,t,a){"use strict";var r=this&&this.__awaiter||function(e,t,a,r){return new(a||(a=Promise))((function(i,n){function o(e){try{l(r.next(e))}catch(e){n(e)}}function s(e){try{l(r.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Converter=void 0;const i=a(12178),n=a(10471),o=a(24359),s=a(99093),l=a(25360);class u{constructor(e){(e=e||{}).variableDelimiter=e.variableDelimiter||"_",e.expressionVariableCounter=e.expressionVariableCounter||0,this.util=new l.Util(e),this.initializeNodeHandlers(e)}static registerNodeHandlers(e,t){e.registerNodeHandler(new n.NodeHandlerDocument(e,t)),e.registerNodeHandler(new n.NodeHandlerDefinitionOperation(e,t)),e.registerNodeHandler(new n.NodeHandlerDefinitionFragment(e,t)),e.registerNodeHandler(new n.NodeHandlerSelectionFragmentSpread(e,t)),e.registerNodeHandler(new n.NodeHandlerSelectionInlineFragment(e,t)),e.registerNodeHandler(new n.NodeHandlerSelectionField(e,t))}static registerNodeValueHandlers(e,t){e.registerNodeValueHandler(new n.NodeValueHandlerVariable(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerInt(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerFloat(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerString(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerBoolean(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerNull(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerEnum(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerList(e,t)),e.registerNodeValueHandler(new n.NodeValueHandlerObject(e,t))}static registerDirectiveNodeHandlers(e,t){e.registerDirectiveNodeHandler(new o.DirectiveNodeHandlerInclude(e,t)),e.registerDirectiveNodeHandler(new o.DirectiveNodeHandlerOptional(e,t)),e.registerDirectiveNodeHandler(new o.DirectiveNodeHandlerPlural(e,t)),e.registerDirectiveNodeHandler(new o.DirectiveNodeHandlerSingle(e,t)),e.registerDirectiveNodeHandler(new o.DirectiveNodeHandlerSkip(e,t))}graphqlToSparqlAlgebra(e,t,a){return r(this,void 0,void 0,(function*(){return this.graphqlToSparqlAlgebraRawContext(e,yield this.util.contextParser.parse(t),a)}))}graphqlToSparqlAlgebraRawContext(e,t,a){a=a||{};const r="string"==typeof e?i.parse(e):e,n={context:t,fragmentDefinitions:this.indexFragments(r),graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:s.SingularizeState.PLURAL,singularizeVariables:a.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:a.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(r,n)}indexFragments(e){const t={},a=[];for(const r of e.definitions)"FragmentDefinition"===r.kind?t[r.name.value]=r:a.push(r);return e.definitions=a,t}initializeNodeHandlers(e){u.registerNodeHandlers(this.util,e),u.registerNodeValueHandlers(this.util,e),u.registerDirectiveNodeHandlers(this.util,e)}}t.Converter=u},99093:(e,t)=>{"use strict";var a;Object.defineProperty(t,"__esModule",{value:!0}),t.SingularizeState=void 0,(a=t.SingularizeState||(t.SingularizeState={}))[a.SINGLE=0]="SINGLE",a[a.PLURAL=1]="PLURAL"},8012:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},25360:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0;const r=a(27540),i=a(11288),n=a(81495);t.Util=class{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new r.DataFactory,this.operationFactory=new n.Factory(this.dataFactory),this.contextParser=new i.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,t){const a=this.nodeHandlers[e.kind];if(!a)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return a.handle(e,t)}handleNodeValue(e,t,a){const r=this.nodeValueHandlers[e.kind];if(!r)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return r.handle(e,t,a)}handleDirectiveNode(e,t){const a=this.directiveNodeHandlers[e.directive.name.value];return a?a.handle(e,t):null}joinOperations(e){if(1===e.length)return e[0];const t=[],a=[];for(const r of e)"bgp"===r.type?t.push(r):a.push(r);if(t.length===e.length)return this.joinOperationsAsBgp(t);if(t.length===e.length-1&&"leftjoin"===a[0].type&&"bgp"===a[0].left.type){const e=a[0];return t.push(e.left),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(t),e.right)}return a.length===e.length?this.joinOperationsAsNestedJoin(a):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(t),this.joinOperationsAsNestedJoin(a)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map((e=>e.patterns))))}joinOperationsAsNestedJoin(e){return e.reverse().reduce(((e,t)=>e?this.operationFactory.createJoin(t,e):t),null)}appendFieldToPath(e,t){return e.concat([t])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,t){return this.dataFactory.variable((t.path.length?t.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,t){const a=t.expandTerm(e,!0);if(this.settings.requireContext&&!a)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(a||e)}getArgument(e,t){if(e)for(const a of e)if(a.name.value===t)return a;return null}newTypePattern(e,t,a){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(t.name.value,a.context),a.graph)}createQuadPattern(e,t,a,r,i){const n=this.valueToNamedNode(t.value,i);return i&&i.getContextRaw()[t.value]&&i.getContextRaw()[t.value]["@reverse"]?this.operationFactory.createPattern(a,n,e,r):this.operationFactory.createPattern(e,n,a,r)}createQuadPath(e,t,a,r,i,n){const o=this.valueToNamedNode(t.value,n);let s=this.operationFactory.createLink(o);for(const e of a.values){if("EnumValue"!==e.kind)throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+e.kind);s=this.operationFactory.createAlt(s,this.operationFactory.createLink(this.valueToNamedNode(e.value,n)))}return n&&n.getContextRaw()[t.value]&&n.getContextRaw()[t.value]["@reverse"]?this.operationFactory.createPath(r,s,e,i):this.operationFactory.createPath(e,s,r,i)}}},27130:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerAdapter=void 0,t.NodeHandlerAdapter=class{constructor(e,t,a){this.targetKind=e,this.util=t,this.settings=a}getNodeQuadContextSelectionSet(e,t,a){const r={};if(e)for(const t of e.selections)if("Field"===t.kind){const e=t;this.handleNodeQuadContextField(e,a,r,"id","subject"),this.handleNodeQuadContextField(e,a,r,"graph","graph")}return r}handleNodeQuadContextField(e,t,a,r,i){if(!a[i]&&e.name.value===r){if(!a[i]){const n=this.util.getArgument(e.arguments,"_");if(n){const o=this.util.handleNodeValue(n.value,e.name.value,t);if(1!==o.terms.length)throw new Error(`Only single values can be set as ${r}, but got ${o.terms.length} at ${e.name.value}`);a[i]=o.terms[0],o.auxiliaryPatterns&&(a.auxiliaryPatterns||(a.auxiliaryPatterns=[]),a.auxiliaryPatterns.concat(o.auxiliaryPatterns))}}if(!a[i]){const r=this.util.nameToVariable(this.util.getFieldLabel(e),t);t.terminalVariables.push(r),a[i]=r}}}getDirectiveOutputs(e,t,a){const r=[];if(e)for(const i of e){const e=this.util.handleDirectiveNode({directive:i,fieldLabel:t},a);if(e){if(e.ignore)return null;r.push(e)}}return r}handleDirectiveOutputs(e,t){for(const a of e){if(a.ignore)return this.util.operationFactory.createBgp([]);a.operationOverrider&&(t=a.operationOverrider(t))}return t}}},2342:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionAdapter=void 0;const r=a(27130);class i extends r.NodeHandlerAdapter{constructor(e,t,a){super(e,t,a)}}t.NodeHandlerDefinitionAdapter=i},4476:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionFragment=void 0;const r=a(2342);class i extends r.NodeHandlerDefinitionAdapter{constructor(e,t){super("FragmentDefinition",e,t)}handle(e,t){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}}t.NodeHandlerDefinitionFragment=i},14282:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDefinitionOperation=void 0;const r=a(2342);class i extends r.NodeHandlerDefinitionAdapter{constructor(e,t){super("OperationDefinition",e,t)}handle(e,t){if("query"!==e.operation)throw new Error("Unsupported definition operation: "+e.operation);if(e.variableDefinitions)for(const a of e.variableDefinitions){const e=a.variable.name.value;a.defaultValue&&(t.variablesDict[e]||(t.variablesDict[e]=a.defaultValue));let r=a.type;const i="NonNullType"===r.kind;i&&(r=r.type);const n="ListType"===r.kind;n&&(r=r.type);const o=r.name.value;t.variablesMetaDict[e]={mandatory:i,list:n,type:o}}const a=this.getDirectiveOutputs(e.directives,e.name?e.name.value:"",t);if(!a)return this.util.operationFactory.createBgp([]);const r=this.util.joinOperations(e.selectionSet.selections.map((e=>this.util.handleNode(e,t))));return this.handleDirectiveOutputs(a,r)}}t.NodeHandlerDefinitionOperation=i},77331:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerDocument=void 0;const r=a(81495),i=a(27130);class n extends i.NodeHandlerAdapter{constructor(e,t){super("Document",e,t)}handle(e,t){const a=this.util.operationFactory.createProject(e.definitions.map((e=>{const a=this.getNodeQuadContextDefinitionNode(e,Object.assign(Object.assign({},t),{ignoreUnknownVariables:!0})),r=Object.assign(Object.assign({},t),{graph:a.graph||t.graph,subject:a.subject||this.util.dataFactory.blankNode()});let i=this.util.handleNode(e,r);return a&&a.auxiliaryPatterns&&(i=this.util.joinOperations([i,this.util.operationFactory.createBgp(a.auxiliaryPatterns)])),i})).reduce(((e,t)=>t?e?this.util.operationFactory.createUnion(e,t):t:e),null),t.terminalVariables);return this.translateBlankNodesToVariables(a)}getNodeQuadContextDefinitionNode(e,t){return"OperationDefinition"===e.kind?this.getNodeQuadContextSelectionSet(e.selectionSet,e.name?e.name.value:"",t):null}translateBlankNodesToVariables(e){const t=this,a={},i=Array.from(e.variables).reduce(((e,t)=>(e[t.value]=!0,e)),{});return r.Util.mapOperation(e,{path:(e,t)=>({recurse:!1,result:t.createPath(n(e.subject),e.predicate,n(e.object),n(e.graph))}),pattern:(e,t)=>({recurse:!1,result:t.createPattern(n(e.subject),n(e.predicate),n(e.object),n(e.graph))})});function n(e){if("BlankNode"===e.termType){let n=a[e.value];return n||(n=r.Util.createUniqueVariable(e.value,i,t.util.dataFactory),i[n.value]=!0,a[e.value]=n),n}return e}}}t.NodeHandlerDocument=n},34939:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionAdapter=void 0;const r=a(81495),i=a(99093),n=a(27130);class o extends n.NodeHandlerAdapter{constructor(e,t,a){super(e,t,a)}getNodeQuadContextFieldNode(e,t,a){return this.getNodeQuadContextSelectionSet(e.selectionSet,t,Object.assign(Object.assign({},a),{path:this.util.appendFieldToPath(a.path,t)}))}fieldToOperation(e,t,a,n){const o=a;let s,l=0;if(("id"===t.name.value||"graph"===t.name.value)&&(a=!1,t.arguments))for(const a of t.arguments)"_"===a.name.value&&this.util.handleNodeValue(a.value,t.name.value,e);const u=this.util.getFieldLabel(t);if(e.singularizeState===i.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(u,e).value]=!0),a){const t=this.handleMetaField(e,u,n);if(t)return t}const d=n?[this.util.operationFactory.createBgp(n)]:[],c=this.getNodeQuadContextFieldNode(t,u,e);let h=c.subject||this.util.nameToVariable(u,e),p=c.graph||e.graph;c.auxiliaryPatterns&&d.push(this.util.operationFactory.createBgp(c.auxiliaryPatterns));let v=!0,f=null;if(a&&t.arguments&&t.arguments.length)for(const r of t.arguments){if("_"===r.name.value){const i=this.util.handleNodeValue(r.value,t.name.value,e);f=i.terms,d.push(this.util.operationFactory.createBgp(i.terms.map((a=>this.util.createQuadPattern(e.subject,t.name,a,e.graph,e.context))))),i.auxiliaryPatterns&&d.push(this.util.operationFactory.createBgp(c.auxiliaryPatterns)),a=!1;break}if("graph"===r.name.value){const a=this.util.handleNodeValue(r.value,t.name.value,e);if(1!==a.terms.length)throw new Error(`Only single values can be set as graph, but got ${a.terms.length} at ${t.name.value}`);p=a.terms[0],e=Object.assign(Object.assign({},e),{graph:p}),a.auxiliaryPatterns&&d.push(this.util.operationFactory.createBgp(c.auxiliaryPatterns));break}if("alt"===r.name.value){let a=r.value;"ListValue"!==a.kind&&(a={kind:"ListValue",values:[a]}),d.push(this.util.createQuadPath(e.subject,t.name,a,h,e.graph,e.context)),v=!1;break}}if(a&&v&&d.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,t.name,h,e.graph,e.context)])),t.arguments&&t.arguments.length)for(const a of t.arguments)if("_"===a.name.value||"graph"===a.name.value||"alt"===a.name.value);else if("first"===a.name.value){if("IntValue"!==a.value.kind)throw new Error("Invalid value type for 'first' argument: "+a.value.kind);s=parseInt(a.value.value,10)}else if("offset"===a.name.value){if("IntValue"!==a.value.kind)throw new Error("Invalid value type for 'offset' argument: "+a.value.kind);l=parseInt(a.value.value,10)}else{const t=this.util.handleNodeValue(a.value,a.name.value,e);d.push(this.util.operationFactory.createBgp(t.terms.map((t=>this.util.createQuadPattern(h,a.name,t,e.graph,e.context))))),t.auxiliaryPatterns&&d.push(this.util.operationFactory.createBgp(c.auxiliaryPatterns))}const g=this.getDirectiveOutputs(t.directives,u,e);if(!g)return this.util.operationFactory.createBgp([]);let y=this.util.joinOperations(d);if(t.selectionSet&&t.selectionSet.selections.length){if(f){if(1!==f.length)throw new Error(`Only single values can be set as id, but got ${f.length} at ${t.name.value}`);h=f[0]}const a=Object.assign(Object.assign(Object.assign({},e),o?{path:this.util.appendFieldToPath(e.path,u)}:{}),{graph:p,subject:o?h:e.subject});let r=!1;const i=t.selectionSet.selections.filter((e=>"Field"!==e.kind||"totalCount"!==e.name.value||(r=!0,!1)));let n=this.util.joinOperations(d.concat(i.map((e=>this.util.handleNode(e,a)))));if(r){const t=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),a=this.util.dataFactory.variable(h.value+this.settings.variableDelimiter+"totalCount"),r=this.util.operationFactory.createBoundAggregate(t,"count",this.util.operationFactory.createTermExpression(h),!1),o=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(y,[],[r]),a,this.util.operationFactory.createTermExpression(t)),[a]);e.terminalVariables.push(a),n=i.length?this.util.operationFactory.createJoin(this.util.operationFactory.createProject(n,[]),o):o}y=n}else a&&"Variable"===h.termType&&e.terminalVariables.push(h);return(l||s)&&(y=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(y,r.Util.inScopeVariables(y)),l,s)),this.handleDirectiveOutputs(g,y)}handleMetaField(e,t,a){if("__typename"===t){const r=this.util.nameToVariable(t,e);return e.terminalVariables.push(r),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(t,e),e.graph)].concat(a||[]))}return null}}t.NodeHandlerSelectionAdapter=o},54296:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionField=void 0;const r=a(34939);class i extends r.NodeHandlerSelectionAdapter{constructor(e,t){super("Field",e,t)}handle(e,t){return this.fieldToOperation(t,e,!0)}}t.NodeHandlerSelectionField=i},37020:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionFragmentSpread=void 0;const r=a(34939);class i extends r.NodeHandlerSelectionAdapter{constructor(e,t){super("FragmentSpread",e,t)}handle(e,t){const a=t.fragmentDefinitions[e.name.value];if(!a)throw new Error("Undefined fragment definition: "+e.name.value);const r={alias:null,arguments:null,directives:a.directives,kind:"Field",name:e.name,selectionSet:a.selectionSet},i=[this.util.newTypePattern(t.subject,a.typeCondition,t)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,r,!1,i))}}t.NodeHandlerSelectionFragmentSpread=i},32660:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeHandlerSelectionInlineFragment=void 0;const r=a(34939);class i extends r.NodeHandlerSelectionAdapter{constructor(e,t){super("InlineFragment",e,t)}handle(e,t){const a={alias:null,arguments:null,directives:e.directives,kind:"Field",name:{kind:"Name",value:t.subject.value},selectionSet:e.selectionSet},r=e.typeCondition?[this.util.newTypePattern(t.subject,e.typeCondition,t)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,a,!1,r))}}t.NodeHandlerSelectionInlineFragment=i},57402:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerAdapter=void 0,t.DirectiveNodeHandlerAdapter=class{constructor(e,t,a){this.targetKind=e,this.util=t,this.settings=a}getDirectiveConditionalValue(e,t){const a=this.util.getArgument(e.arguments,"if");if(!a)throw new Error(`The directive ${e.name.value} is missing an if-argument.`);const r=this.util.handleNodeValue(a.value,a.name.value,t);if(1!==r.terms.length)throw new Error(`Can not apply the directive ${e.name.value} with a list.`);return r.terms[0]}isDirectiveScopeAll(e){const t=this.util.getArgument(e.arguments,"scope");return t&&"EnumValue"===t.value.kind&&"all"===t.value.value}}},96510:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerInclude=void 0;const r=a(57402);class i extends r.DirectiveNodeHandlerAdapter{constructor(e,t){super("include",e,t)}handle(e,t){const a=this.getDirectiveConditionalValue(e.directive,t);return"Literal"===a.termType&&"false"===a.value?{ignore:!0}:{}}}t.DirectiveNodeHandlerInclude=i},75579:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerOptional=void 0;const r=a(57402);class i extends r.DirectiveNodeHandlerAdapter{constructor(e,t){super("optional",e,t)}handle(e,t){return{operationOverrider:e=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),e)}}}t.DirectiveNodeHandlerOptional=i},66654:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerPlural=void 0;const r=a(99093),i=a(57402);class n extends i.DirectiveNodeHandlerAdapter{constructor(e,t){super("plural",e,t)}handle(e,t){return this.isDirectiveScopeAll(e.directive)&&(t.singularizeState=r.SingularizeState.PLURAL),delete t.singularizeVariables[this.util.nameToVariable(e.fieldLabel,t).value],{}}}t.DirectiveNodeHandlerPlural=n},26146:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerSingle=void 0;const r=a(99093),i=a(57402);class n extends i.DirectiveNodeHandlerAdapter{constructor(e,t){super("single",e,t)}handle(e,t){return this.isDirectiveScopeAll(e.directive)&&(t.singularizeState=r.SingularizeState.SINGLE),t.singularizeVariables[this.util.nameToVariable(e.fieldLabel,t).value]=!0,{}}}t.DirectiveNodeHandlerSingle=n},22861:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DirectiveNodeHandlerSkip=void 0;const r=a(57402);class i extends r.DirectiveNodeHandlerAdapter{constructor(e,t){super("skip",e,t)}handle(e,t){const a=this.getDirectiveConditionalValue(e.directive,t);return"Literal"===a.termType&&"true"===a.value?{ignore:!0}:{}}}t.DirectiveNodeHandlerSkip=i},24359:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(57402),t),i(a(96510),t),i(a(75579),t),i(a(66654),t),i(a(26146),t),i(a(22861),t)},10471:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(24359),t),i(a(41498),t),i(a(27130),t),i(a(2342),t),i(a(4476),t),i(a(14282),t),i(a(77331),t),i(a(34939),t),i(a(54296),t),i(a(37020),t),i(a(32660),t)},65783:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerAdapter=void 0,t.NodeValueHandlerAdapter=class{constructor(e,t,a){this.targetKind=e,this.util=t,this.settings=a}}},30091:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerBoolean=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("BooleanValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(e,t,a){return{terms:[this.util.dataFactory.literal(e.value?"true":"false",this.datatype)]}}}t.NodeValueHandlerBoolean=i},34239:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerEnum=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("EnumValue",e,t)}handle(e,t,a){return{terms:[this.util.valueToNamedNode(e.value,a.context)]}}}t.NodeValueHandlerEnum=i},33360:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerFloat=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("FloatValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(e,t,a){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}t.NodeValueHandlerFloat=i},48454:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerInt=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("IntValue",e,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(e,t,a){return{terms:[this.util.dataFactory.literal(e.value,this.datatype)]}}}t.NodeValueHandlerInt=i},89733:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerList=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("ListValue",e,t),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,t,a){const r=[];let i=[];for(const n of e.values){const e=this.util.handleNodeValue(n,t,a);for(const t of e.terms)r.push(t);e.auxiliaryPatterns&&(i=i.concat(e.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const e=this.util.dataFactory.blankNode();let t=e,n=r.length;for(const e of r){i.push(this.util.operationFactory.createPattern(t,this.nodeFirst,e,a.graph));const r=0==--n?this.nodeNil:this.util.dataFactory.blankNode();i.push(this.util.operationFactory.createPattern(t,this.nodeRest,r,a.graph)),t=r}return{terms:[e],auxiliaryPatterns:i}}return{terms:r,auxiliaryPatterns:i}}}t.NodeValueHandlerList=i},24588:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerNull=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("NullValue",e,t),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(e,t,a){return{terms:[this.nil]}}}t.NodeValueHandlerNull=i},26663:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerObject=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("ObjectValue",e,t)}handle(e,t,a){const r=this.util.dataFactory.blankNode();let i=[];for(const n of e.fields){const e=this.util.handleNodeValue(n.value,t,a);for(const t of e.terms)i.push(this.util.createQuadPattern(r,n.name,t,a.graph,a.context));e.auxiliaryPatterns&&(i=i.concat(e.auxiliaryPatterns))}return{terms:[r],auxiliaryPatterns:i}}}t.NodeValueHandlerObject=i},21554:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerString=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("StringValue",e,t)}handle(e,t,a){const r=a.context.getContextRaw()[t];let i=null,n=null;return r&&"string"!=typeof r&&(r["@language"]?i=r["@language"]:r["@type"]&&(n=this.util.dataFactory.namedNode(r["@type"]))),{terms:[this.util.dataFactory.literal(e.value,i||n)]}}}t.NodeValueHandlerString=i},46934:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NodeValueHandlerVariable=void 0;const r=a(65783);class i extends r.NodeValueHandlerAdapter{constructor(e,t){super("Variable",e,t)}handle(e,t,a){const r=e.name.value,i=a.variablesDict[r],n=a.variablesMetaDict[r];if(!i){if(a.ignoreUnknownVariables||n&&!n.mandatory){const e=this.util.dataFactory.variable(r);return a.terminalVariables.map((e=>e.value)).indexOf(r)<0&&a.terminalVariables.push(e),{terms:[e]}}throw new Error(`Undefined variable: ${r}`)}if("Variable"===i.kind)throw new Error(`Variable refers to another variable: ${r}`);if(n)if(n.list){if("ListValue"!==i.kind)throw new Error(`Expected a list, but got ${i.kind} for ${r}`);if(n.type){const e=i;for(const t of e.values)if(t.kind!==n.type)throw new Error(`Expected ${n.type}, but got ${t.kind} for ${r}`)}}else n.type;return this.util.handleNodeValue(i,t,a)}}t.NodeValueHandlerVariable=i},41498:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(65783),t),i(a(30091),t),i(a(34239),t),i(a(33360),t),i(a(48454),t),i(a(89733),t),i(a(24588),t),i(a(26663),t),i(a(21554),t),i(a(46934),t)},27540:function(e,t,a){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,a,r){void 0===r&&(r=a),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[a]}})}:function(e,t,a,r){void 0===r&&(r=a),e[r]=t[a]}),i=this&&this.__exportStar||function(e,t){for(var a in e)"default"===a||Object.prototype.hasOwnProperty.call(t,a)||r(t,e,a)};Object.defineProperty(t,"__esModule",{value:!0}),i(a(76792),t),i(a(8834),t),i(a(99195),t),i(a(76767),t),i(a(50948),t),i(a(27401),t),i(a(78514),t)},76792:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNode=void 0,t.BlankNode=class{constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},8834:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataFactory=void 0;const r=a(76792),i=a(99195),n=a(76767),o=a(50948),s=a(27401),l=a(78514);let u=0;t.DataFactory=class{constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${u++}_`}namedNode(e){return new o.NamedNode(e)}blankNode(e){return new r.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new n.Literal(e,t)}variable(e){return new l.Variable(e)}defaultGraph(){return i.DefaultGraph.INSTANCE}quad(e,t,a,r){return new s.Quad(e,t,a,r||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(n.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}}},99195:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&"DefaultGraph"===e.termType}}t.DefaultGraph=a,a.INSTANCE=new a},76767:(e,t,a)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Literal=void 0;const r=a(50948);class i{constructor(e,t){this.termType="Literal",this.value=e,"string"==typeof t?(this.language=t,this.datatype=i.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=i.XSD_STRING)}equals(e){return!!e&&"Literal"===e.termType&&e.value===this.value&&e.language===this.language&&e.datatype.equals(this.datatype)}}t.Literal=i,i.RDF_LANGUAGE_STRING=new r.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),i.XSD_STRING=new r.NamedNode("http://www.w3.org/2001/XMLSchema#string")},50948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NamedNode=void 0,t.NamedNode=class{constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&"NamedNode"===e.termType&&e.value===this.value}}},27401:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Quad=void 0,t.Quad=class{constructor(e,t,a,r){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=a,this.graph=r}equals(e){return!!e&&("Quad"===e.termType||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}},78514:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Variable=void 0,t.Variable=class{constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&"Variable"===e.termType&&e.value===this.value}}}}]);