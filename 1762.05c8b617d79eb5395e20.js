(self.webpackChunkprojectquery=self.webpackChunkprojectquery||[]).push([[1762],{31762:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Q});var r=n(7271),a=n.n(r),o=n(97650),c=n.n(o),l=n(85061),i=n(92137),s=n(28481),u=n(87757),d=n.n(u),m=n(97591),f=n(55877),p=n.n(f),b=n(81495);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==n.return||n.return()}finally{if(l)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n(60306);var v=n(81092).newEngine;const g=function(e){var t=e.sharedProps,n=e.inactive,o=(t.session,t.activeResources),c=t.setSelectedElements,u=(t.selectedElements,t.project,t.setSelectionId),f=t.store,y=(0,r.useState)("\nPREFIX beo: <https://pi.pauwel.be/voc/buildingelement#>\nSELECT ?element \nWHERE {\n  ?element a beo:Door .\n}\n"),g=(0,s.Z)(y,2),E=g[0],k=g[1],w=(0,r.useState)(!1),S=(0,s.Z)(w,2),x=(S[0],S[1],(0,r.useState)(!1)),j=(0,s.Z)(x,2),Z=(j[0],j[1],(0,r.useState)([])),R=(0,s.Z)(Z,2),C=R[0],q=R[1],I=(0,r.useState)([]),P=(0,s.Z)(I,2),O=P[0],A=P[1],F=(0,r.useState)(!1),T=(0,s.Z)(F,2),Q=(T[0],T[1],(0,r.useState)(!1)),L=(0,s.Z)(Q,2),W=(L[0],L[1],(0,r.useState)(null)),B=(0,s.Z)(W,2),z=B[0],D=B[1];function H(e,t){return J.apply(this,arguments)}function J(){return(J=(0,i.Z)(d().mark((function e(t,n){var r,a,o,c,l,i,s,u;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=O.filter((function(e){return e.checked})).map((function(e){return t.get("?".concat(e.name)).id})),a=[],o=h(r),e.prev=3,o.s();case 5:if((c=o.n()).done){e.next=19;break}return l=c.value,i=v(),s="\n        PREFIX lbd: <https://lbdserver.org/vocabulary#>\n        SELECT ?art WHERE {\n          ?art lbd:hasLinkElement ?le .\n          ?le lbd:hasIdentifier ?id . \n          ?id lbd:identifier <".concat(l,"> .\n        }"),e.next=11,i.query(s,{sources:[f]});case 11:return u=e.sent,e.next=14,u.bindings();case 14:return e.sent.forEach((function(e){var t=e.get("?art").id;a.push({global:[t],selectionId:n})})),e.abrupt("return",a);case 17:e.next=5;break;case 19:e.next=24;break;case 21:e.prev=21,e.t0=e.catch(3),o.e(e.t0);case 24:return e.prev=24,o.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[3,21,24,27]])})))).apply(this,arguments)}function N(){return(N=(0,i.Z)(d().mark((function e(t){var n,r,a,l,i,s,m,f;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c([]),q([]),n=p()(),u(n),r=v(),a=o.filter((function(e){return e.main.endsWith(".ttl")})),e.next=8,r.query(E,{sources:a.map((function(e){return e.main}))});case 8:return l=e.sent,e.next=11,l.bindings();case 11:return i=e.sent,q(i),s=i.map((function(e){return H(e,n)})),e.next=16,Promise.all(s);case 16:m=e.sent,f=m.flat(),c(f);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.useEffect)((function(){try{O.filter((function(e){return e.checked})).map((function(e){return e.name}));var e=(0,b.translate)(E);D(null),A(e.variables.map((function(e){return{name:e.value,checked:!0}})))}catch(e){D(e.message)}}),[E]),n?a().createElement(a().Fragment,null):a().createElement("div",{style:{margin:20}},a().createElement("h3",null,"Project Query"),a().createElement("div",null,a().createElement(m.TextField,{id:"standard-multiline-flexible",label:"Query",fullWidth:!0,multiline:!0,onChange:function(e){k(e.target.value)},value:E,helperText:z,error:z}),a().createElement("h3",null,"Variables to visualize"),a().createElement(m.FormGroup,null,O.map((function(e){return a().createElement(m.FormControlLabel,{key:e.name,control:a().createElement(m.Checkbox,{checked:e.checked,onChange:function(t){var n=O.filter((function(t){return t.name!==e.name}));A([].concat((0,l.Z)(n),[{name:e.name,checked:!e.checked}]))},name:"checkedB",color:"primary"}),label:e.name})}))),a().createElement(m.Button,{variant:"contained",color:"primary",onClick:function(){return function(e){return N.apply(this,arguments)}()}},"Query"),a().createElement("ul",null,C.map((function(e,t){return a().createElement("li",{key:t},JSON.stringify(e))})))))};var E=n(24853),k=n(75073),w=n(81344),S=((0,E.atom)({key:"session",default:new k.Session}),(0,E.atom)({key:"projects",default:["http://localhost:5000/jeroen/lbd/642f0417-ce23-4d9d-8806-c078aed93ae1/"]})),x=(0,E.atom)({key:"activeResources",default:[]}),j=(0,E.atom)({key:"selectedElements",default:[]}),Z=(0,E.atom)({key:"selectionId",default:""}),R=(0,E.atom)({key:"trigger",default:"0"}),C=(0,E.atom)({key:"store",default:new w.Store}),q=n(60698),I=n(89875),P=n(97581),O=n(60306),A=n(60306),F=function(e,t,n){var r;if(n)r=a().createElement(n,null);else{var o={};t&&(o=t),r=a().createElement(g,o)}c().render(r,e)},T=document.querySelector("#"+A.name);T&&F(T,{},(function(){var e={url:"http://example.org/remoteEntry.js",scope:O.name,label:O.name,module:"./index",dimensions:{x:0,y:0,h:850,w:400}},t=function(e,t){return function(){var n=(0,r.useState)(!0),o=(0,s.Z)(n,2),c=o[0],l=o[1],i=(0,E.useRecoilState)(x),u=(0,s.Z)(i,2),d=u[0],f=u[1],p=(0,E.useRecoilState)(j),b=(0,s.Z)(p,2),h=b[0],y=b[1],v=(0,E.useRecoilState)(S),g=(0,s.Z)(v,2),k=g[0],w=g[1],q=(0,E.useRecoilState)(Z),O=(0,s.Z)(q,2),A=O[0],F=O[1],T=(0,E.useRecoilState)(R),Q=(0,s.Z)(T,2),L=Q[0],W=Q[1],B=(0,E.useRecoilValue)(C),z={projects:k,setProjects:w,activeResources:d,setActiveResources:f,selectedElements:h,setSelectedElements:y,selectionId:A,setSelectionId:F,trigger:L,setTrigger:W,store:B};return a().createElement("div",null,a().createElement(m.IconButton,{style:{position:"absolute",right:c?450:0},variant:"contained",color:"primary",onClick:function(){return l(!c)}},c?a().createElement(a().Fragment,null):a().createElement(I.default,null)),a().createElement(P.Options,{openOptions:c,setOpenOptions:l,trigger:L,setTrigger:W,projects:k,setProjects:w,store:B})," ",a().createElement(e,{sharedProps:z,module:t,children:null,inactive:!1}))}}(g,e);return a().createElement("div",{style:{width:e.dimensions.w,height:e.dimensions.h}},a().createElement(E.RecoilRoot,null,a().createElement(q.QueryClientProvider,{client:new q.QueryClient},a().createElement(t,{module:e}))))}));const Q=F},60306:e=>{"use strict";e.exports=JSON.parse('{"name":"projectquery","version":"1.0.0","port":8083,"scripts":{"start":"webpack serve --config config/webpack.dev.js","build:dev":"webpack --config config/webpack.dev.js","build":"webpack --config config/webpack.prod.js"},"dependencies":{"@comunica/actor-init-sparql":"^1.22.0","@frogcat/ttl2jsonld":"0.0.6","@inrupt/solid-client-authn-browser":"^1.11.2","@ldflex/comunica":"^3.4.2","@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","@solid/query-ldflex":"^2.11.3","assert":"^2.0.0","browserify-fs":"^1.0.0","browserify-zlib":"^0.2.0","buffer":"^6.0.3","consolid":"^1.0.1","consolid-react-ui":"0.0.10","crypto-browserify":"^3.12.0","events":"^3.3.0","graphql-ld":"^1.2.0","graphql-ld-comunica-solid":"^1.0.1","https-browserify":"^1.0.0","ldflex":"^2.12.1","mem":"^9.0.0","n3":"^1.10.0","os-browserify":"^0.3.0","path":"^0.12.7","path-browserify":"^1.0.1","process":"^0.11.10","react":"^17.0.1","react-bootstrap":"^1.6.0","react-dom":"^17.0.1","react-query":"^3.24.4","react-router-dom":"^5.2.0","recoil":"^0.4.1","source-map-loader":"^3.0.0","sparqlalgebrajs":"^3.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","util":"^0.12.4"},"devDependencies":{"@babel/core":"^7.12.3","@babel/plugin-transform-runtime":"^7.12.1","@babel/preset-env":"^7.12.1","@babel/preset-react":"^7.12.1","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","css-loader":"^5.0.0","html-webpack-plugin":"^4.5.0","style-loader":"^2.0.0","webpack":"^5.4.0","webpack-cli":"^4.7.0","webpack-dev-server":"^3.11.2","webpack-merge":"^5.2.0"}}')}}]);