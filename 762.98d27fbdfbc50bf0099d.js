(self.webpackChunkprojectquery=self.webpackChunkprojectquery||[]).push([[762],{31762:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>H});var n=r(77865),a=r.n(n),o=r(21704),l=r.n(o),c=r(90484),i=r(85061),s=r(92137),u=r(28481),d=r(87757),f=r.n(d),p=r(96533),m=r(55877),b=r.n(m),h=r(81495);function v(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(e){if("string"==typeof e)return y(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?y(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==r.return||r.return()}finally{if(c)throw o}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r(60306);var g=r(81092).newEngine;const w=function(e){var t=e.sharedProps,r=e.inactive,o=(t.session,t.activeResources),l=t.setSelectedElements,d=(t.selectedElements,t.project,t.setSelectionId),m=t.store,y=(0,n.useState)("\nPREFIX beo: <https://pi.pauwel.be/voc/buildingelement#>\nSELECT ?element \nWHERE {\n  ?element a beo:Door .\n}\n"),w=(0,u.Z)(y,2),k=w[0],E=w[1],S=(0,n.useState)(!1),x=(0,u.Z)(S,2),j=(x[0],x[1],(0,n.useState)(!1)),I=(0,u.Z)(j,2),Z=(I[0],I[1],(0,n.useState)([])),R=(0,u.Z)(Z,2),C=R[0],q=R[1],P=(0,n.useState)([]),O=(0,u.Z)(P,2),T=O[0],A=O[1],F=(0,n.useState)(!1),Q=(0,u.Z)(F,2),H=(Q[0],Q[1],(0,n.useState)(!1)),L=(0,u.Z)(H,2),N=(L[0],L[1],(0,n.useState)(null)),W=(0,u.Z)(N,2),z=W[0],B=W[1];function D(e,t){return X.apply(this,arguments)}function X(){return(X=(0,s.Z)(f().mark((function e(t,r){var n;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.delegateYield(f().mark((function e(){var n,a,o,l,c,i,s,u;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=T.filter((function(e){return e.checked})).map((function(e){return t.get("?".concat(e.name)).id})),a=[],o=v(n),e.prev=3,o.s();case 5:if((l=o.n()).done){e.next=20;break}return c=l.value,i=g(),s="\n        PREFIX lbd: <https://lbdserver.org/vocabulary#>\n        PREFIX owl: <http://www.w3.org/2002/07/owl#>\n        SELECT DISTINCT ?art ?alias WHERE {\n          ?art lbd:hasLinkElement ?le .\n          ?le lbd:hasIdentifier ?id . \n          ?id lbd:identifier <".concat(c,"> .\n\n          OPTIONAL { ?art owl:sameAs ?alias }\n        }"),e.next=11,i.query(s,{sources:[m]});case 11:return u=e.sent,i.invalidateHttpCache(),e.next=15,u.bindings();case 15:return e.sent.forEach((function(e){var t=e.get("?art").id;try{var n=e.get("?alias").id;a.push({global:[n],selectionId:r})}catch(e){}a.push({global:[t],selectionId:r})})),e.abrupt("return",{v:a});case 18:e.next=5;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),o.e(e.t0);case 25:return e.prev=25,o.f(),e.finish(25);case 28:case"end":return e.stop()}}),e,null,[[3,22,25,28]])}))(),"t0",2);case 2:if(n=e.t0,"object"!==(0,c.Z)(n)){e.next=5;break}return e.abrupt("return",n.v);case 5:e.next=10;break;case 7:e.prev=7,e.t1=e.catch(0),console.log("error in query - doPropagateImmediate",e.t1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function J(){return(J=(0,s.Z)(f().mark((function e(t){var r,n,a,c,i,s,u,p;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,l([]),q([]),r=b()(),d(r),n=g(),a=o.filter((function(e){return e.main.endsWith(".ttl")})),e.next=9,n.query(k,{sources:a.map((function(e){return e.main}))});case 9:return c=e.sent,n.invalidateHttpCache(),e.next=13,c.bindings();case 13:return i=e.sent,q(i),s=i.map((function(e){return D(e,r)})),e.next=18,Promise.all(s);case 18:u=e.sent,p=u.flat(),l(p),e.next=26;break;case 23:e.prev=23,e.t0=e.catch(0),console.log("error in query - queryProject",e.t0);case 26:case"end":return e.stop()}}),e,null,[[0,23]])})))).apply(this,arguments)}return(0,n.useEffect)((function(){try{T.filter((function(e){return e.checked})).map((function(e){return e.name}));var e=(0,h.translate)(k);B(null),A(e.variables.map((function(e){return{name:e.value,checked:!0}})))}catch(e){B(e.message)}}),[k]),r?a().createElement(a().Fragment,null):a().createElement("div",{style:{margin:20}},a().createElement("h3",null,"Project Query"),a().createElement("div",null,a().createElement(p.TextField,{id:"standard-multiline-flexible",label:"Query",fullWidth:!0,multiline:!0,onChange:function(e){E(e.target.value)},value:k,helperText:z,error:z}),a().createElement("h3",null,"Variables to visualize"),a().createElement(p.FormGroup,null,T.map((function(e){return a().createElement(p.FormControlLabel,{key:e.name,control:a().createElement(p.Checkbox,{checked:e.checked,onChange:function(t){var r=T.filter((function(t){return t.name!==e.name}));A([].concat((0,i.Z)(r),[{name:e.name,checked:!e.checked}]))},name:"checkedB",color:"primary"}),label:e.name})}))),a().createElement(p.Button,{variant:"contained",color:"primary",onClick:function(){return function(e){return J.apply(this,arguments)}()}},"Query"),a().createElement("ul",{style:{overflowY:"scroll",maxHeight:500,fontSize:12}},C.map((function(e,t){return a().createElement("li",{key:t},JSON.stringify(e))})))))};var k=r(24853),E=r(75073),S=r(81344),x=((0,k.atom)({key:"session",default:new E.Session}),(0,k.atom)({key:"projects",default:["http://localhost:5000/jeroen/lbd/f65db6eb-fc13-4ee7-955a-cf93fdf29d5b/"]})),j=(0,k.atom)({key:"activeResources",default:[{main:"https://pod.lbdserver.org/jeroen/lbd/f65db6eb-fc13-4ee7-955a-cf93fdf29d5b/architectural_duplex.ttl",metadata:"https://pod.lbdserver.org/jeroen/lbd/f65db6eb-fc13-4ee7-955a-cf93fdf29d5b/architectural_duplex.ttl.props.ttl"}]}),I=(0,k.atom)({key:"selectedElements",default:[]}),Z=(0,k.atom)({key:"selectionId",default:""}),R=(0,k.atom)({key:"trigger",default:"0"}),C=(0,k.atom)({key:"store",default:new S.Store}),q=r(60698),P=r(89875),O=r(97581),T=r(60306),A=r(60306),F=function(e,t,r){var n;if(r)n=a().createElement(r,null);else{var o={};t&&(o=t),n=a().createElement(w,o)}l().render(n,e)},Q=document.querySelector("#"+A.name);Q&&F(Q,{},(function(){var e={url:T.domain,scope:T.name,label:T.name,module:"./index",dimensions:{x:0,y:0,h:850,w:400}},t=function(e,t){return function(){var r=(0,n.useState)(!0),o=(0,u.Z)(r,2),l=o[0],c=o[1],i=(0,k.useRecoilState)(j),s=(0,u.Z)(i,2),d=s[0],f=s[1],m=(0,k.useRecoilState)(I),b=(0,u.Z)(m,2),h=b[0],v=b[1],y=(0,k.useRecoilState)(x),g=(0,u.Z)(y,2),w=g[0],E=g[1],S=(0,k.useRecoilState)(Z),q=(0,u.Z)(S,2),T=q[0],A=q[1],F=(0,k.useRecoilState)(R),Q=(0,u.Z)(F,2),H=Q[0],L=Q[1],N=(0,k.useRecoilValue)(C),W={projects:w,setProjects:E,activeResources:d,setActiveResources:f,selectedElements:h,setSelectedElements:v,selectionId:T,setSelectionId:A,trigger:H,setTrigger:L,store:N};return a().createElement("div",null,a().createElement(p.IconButton,{style:{position:"absolute",right:l?450:0},variant:"contained",color:"primary",onClick:function(){return c(!l)}},l?a().createElement(a().Fragment,null):a().createElement(P.default,null)),a().createElement(O.Options,{openOptions:l,setOpenOptions:c,trigger:H,setTrigger:L,projects:w,setProjects:E,store:N})," ",a().createElement(e,{sharedProps:W,module:t,children:null,inactive:!1}))}}(w,e);return a().createElement("div",{style:{width:e.dimensions.w,height:e.dimensions.h}},a().createElement(k.RecoilRoot,null,a().createElement(q.QueryClientProvider,{client:new q.QueryClient},a().createElement(t,{module:e}))))}));const H=F},60306:e=>{"use strict";e.exports=JSON.parse('{"name":"projectquery","version":"1.0.0","port":8083,"domain":"https://consolidproject.github.io/pluginQuery/","scripts":{"start":"webpack serve --config config/webpack.dev.js","build:dev":"webpack --config config/webpack.dev.js","build":"webpack --config config/webpack.prod.js"},"dependencies":{"@comunica/actor-init-sparql":"^1.22.0","@frogcat/ttl2jsonld":"0.0.6","@inrupt/solid-client-authn-browser":"^1.11.2","@ldflex/comunica":"^3.4.2","@material-ui/core":"^4.11.0","@material-ui/icons":"^4.9.1","@solid/query-ldflex":"^2.11.3","assert":"^2.0.0","browserify-fs":"^1.0.0","browserify-zlib":"^0.2.0","buffer":"^6.0.3","consolid":"^1.0.7","consolid-react-ui":"0.0.10","crypto-browserify":"^3.12.0","events":"^3.3.0","graphql-ld":"^1.2.0","graphql-ld-comunica-solid":"^1.0.1","https-browserify":"^1.0.0","ldflex":"^2.12.1","mem":"^9.0.0","n3":"^1.10.0","os-browserify":"^0.3.0","path":"^0.12.7","path-browserify":"^1.0.1","process":"^0.11.10","react":"^17.0.1","react-bootstrap":"^1.6.0","react-dom":"^17.0.1","react-query":"^3.24.4","react-router-dom":"^5.2.0","recoil":"^0.4.1","source-map-loader":"^3.0.0","sparqlalgebrajs":"^3.0.2","stream-browserify":"^3.0.0","stream-http":"^3.2.0","util":"^0.12.4"},"devDependencies":{"@babel/core":"^7.12.3","@babel/plugin-transform-runtime":"^7.12.1","@babel/preset-env":"^7.12.1","@babel/preset-react":"^7.12.1","babel-loader":"^8.1.0","clean-webpack-plugin":"^3.0.0","css-loader":"^5.0.0","html-webpack-plugin":"^4.5.0","style-loader":"^2.0.0","webpack":"^5.4.0","webpack-cli":"^4.7.0","webpack-dev-server":"^3.11.2","webpack-merge":"^5.2.0"}}')}}]);